# take10

玉は逃げてくれてるようだし、アルファベータ探索入れてみよかな（＾～＾）  
その前に駒得評価関数入れてみるかな（＾～＾）？  
駒得評価を入れてみたけど、きふわらべがどう評価しているか見えないぜ（＾～＾）
評価値出してくれだぜ（＾～＾）  
利きの差分表も 飛、角、香 は分けようかなあ（＾～＾）？  
テスト用のランダム局面を増やすために、プレイアウトも欲しいぜ（＾～＾）  
王手回避のときに打をしてないので、間駒するようにしたいぜ（＾～＾）  

## Test

```plain
# 強制終了した（＾～＾） -> 配列のサイズが変わっていたので length 再計算（＾～＾）
position startpos moves 7g7f 3a4b 6i7h 6c6d 7i6h 5a6b 8h5e 4b5a 5e6d 2c2d 6h7g 6b6c 6d4f 8b3b 4f2d 7a8b 3i4h 1c1d 5i6h 5a6b 7g8h 4a5a 8g8f 2b3a 8h8g 6a5b 7h7i 3b2b 2d4f
go btime 75000 wtime 74000 binc 2000 winc 2000

# 飛打されてなぜか即投了（＾～＾）->利きボードの内容がおかしい ->利きボードも、SFENパーサーもおかしかったので直した（＾～＾）
position startpos moves 7g7f 3c3d 2g2f 2b8h 7i8h 1c1d B*4e B*7h 6i7h 8c8d 4e6c+ 3d3e 6c5c 8b6b 5c6b 5a6b R*6d
go btime 69000 wtime 68000 binc 2000 winc 2000
# 手を戻してみよ（＾～＾）馬で王手されてるな（＾～＾）
position startpos moves 7g7f 3c3d 2g2f 2b8h 7i8h 1c1d B*4e B*7h 6i7h 8c8d 4e6c+ 3d3e 6c5c 8b6b 5c6b
movelist
MoveList
--------
(0) 5a6b
(1) 5a4b
* Except for those to be removed during the search

# 強制終了
position startpos moves 7i6h 4a3b 2h3h 6a5b 3h4h 3a4b 3i3h 7a7b 2g2f 3c3d 6h7i 4b3c 8g8f 5a4b 6i5h 3d3e 7i6h 8c8d 5i6i 7b8c 9i9h 9c9d 9g9f 5c5d 8h7i 8c7d 4i3i 7d7e 2f2e 7e8f 7g7f 8f8g 6h7g 8g9h+ 4g4f L*8e 5g5f 8e8i+ 7g8f 8i7i 6i7i N*8e 8f8e 8d8e N*4g 8e8f 4g3e 8f8g+ 3e2c 8g7h
go

# 違法手。香車持ってないのに打った（＾～＾）先後間違えてる（＾～＾）？ -> 先後のどちらの駒も打つようになってたので修正（＾～＾）
position startpos moves 7g7f 8b4b 3i4h 9a9b 5i6h 6c6d 8h5e 6a7b 5e6d 9c9d 6d5c+ 8a9c 5c4b 3a4b R*9a B*8d 9a9b+ 8d5g 4h5g
go btime 70000 wtime 69000 binc 2000 winc 2000
info depth 0 nodes 118 score cp 0 currmove L*3b pv L*3b
bestmove L*3b
gameover win
```

## Test2

```shell
# 平手初期局面
position startpos

# 利きボード目視確認
control layer 0

[Control(0)Sum l03.FIRST]

  9  8  7  6  5  4  3  2  1
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| a
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| b
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| c
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| d
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| e
+--+--+--+--+--+--+--+--+--+
| 1| 1| 1| 1| 1| 1| 1| 1| 1| f
+--+--+--+--+--+--+--+--+--+
| 3| 0| 2| 0| 0| 0| 1| 1| 2| g
+--+--+--+--+--+--+--+--+--+
| 1| 2| 3| 4| 4| 4| 3| 1| 2| h
+--+--+--+--+--+--+--+--+--+
| 1| 0| 2| 1| 2| 1| 1| 1| 0| i
+--+--+--+--+--+--+--+--+--+


[Control(0)Sum Second]

  9  8  7  6  5  4  3  2  1
+--+--+--+--+--+--+--+--+--+
| 0| 1| 1| 1| 2| 1| 2| 0| 1| a
+--+--+--+--+--+--+--+--+--+
| 2| 1| 3| 4| 4| 4| 3| 2| 1| b
+--+--+--+--+--+--+--+--+--+
| 2| 1| 1| 0| 0| 0| 2| 0| 3| c
+--+--+--+--+--+--+--+--+--+
| 1| 1| 1| 1| 1| 1| 1| 1| 1| d
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| e
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| f
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| g
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| h
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| i
+--+--+--+--+--+--+--+--+--+

# 利き再計算
control recalc 12

# 目視確認
control layer 12

[Control(12)TestRecalc l03.FIRST]

  9  8  7  6  5  4  3  2  1
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| a
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| b
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| c
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| d
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| e
+--+--+--+--+--+--+--+--+--+
| 1| 1| 1| 1| 1| 1| 1| 1| 1| f
+--+--+--+--+--+--+--+--+--+
| 3| 0| 2| 0| 0| 0| 1| 1| 2| g
+--+--+--+--+--+--+--+--+--+
| 1| 2| 3| 4| 4| 4| 3| 1| 2| h
+--+--+--+--+--+--+--+--+--+
| 1| 0| 2| 1| 2| 1| 1| 1| 0| i
+--+--+--+--+--+--+--+--+--+


[Control(12)TestRecalc Second]

  9  8  7  6  5  4  3  2  1
+--+--+--+--+--+--+--+--+--+
| 0| 1| 1| 1| 2| 1| 2| 0| 1| a
+--+--+--+--+--+--+--+--+--+
| 2| 1| 3| 4| 4| 4| 3| 2| 1| b
+--+--+--+--+--+--+--+--+--+
| 2| 1| 1| 0| 0| 0| 2| 0| 3| c
+--+--+--+--+--+--+--+--+--+
| 1| 1| 1| 1| 1| 1| 1| 1| 1| d
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| e
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| f
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| g
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| h
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| i
+--+--+--+--+--+--+--+--+--+

# 利きボード比較
control diff 0 12 10

# 違いをカウント
control sumabs 10
ControlTest: SumAbs=0,0

# 目視確認
control layer 0

[Control(0)Sum l03.FIRST]

  9  8  7  6  5  4  3  2  1
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| a
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| b
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| c
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| d
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| e
+--+--+--+--+--+--+--+--+--+
| 1| 1| 1| 1| 1| 1| 1| 1| 1| f
+--+--+--+--+--+--+--+--+--+
| 3| 0| 2| 0| 0| 0| 1| 1| 2| g
+--+--+--+--+--+--+--+--+--+
| 1| 2| 3| 4| 4| 4| 3| 1| 2| h
+--+--+--+--+--+--+--+--+--+
| 1| 0| 2| 1| 2| 1| 1| 1| 0| i
+--+--+--+--+--+--+--+--+--+


[Control(0)Sum Second]

  9  8  7  6  5  4  3  2  1
+--+--+--+--+--+--+--+--+--+
| 0| 1| 1| 1| 2| 1| 2| 0| 1| a
+--+--+--+--+--+--+--+--+--+
| 2| 1| 3| 4| 4| 4| 3| 2| 1| b
+--+--+--+--+--+--+--+--+--+
| 2| 1| 1| 0| 0| 0| 2| 0| 3| c
+--+--+--+--+--+--+--+--+--+
| 1| 1| 1| 1| 1| 1| 1| 1| 1| d
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| e
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| f
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| g
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| h
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| i
+--+--+--+--+--+--+--+--+--+

# 目視確認
control layer 10

[Control(10)TestCopy l03.FIRST]

  9  8  7  6  5  4  3  2  1
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| a
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| b
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| c
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| d
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| e
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| f
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| g
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| h
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| i
+--+--+--+--+--+--+--+--+--+


[Control(10)TestCopy Second]

  9  8  7  6  5  4  3  2  1
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| a
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| b
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| c
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| d
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| e
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| f
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| g
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| h
+--+--+--+--+--+--+--+--+--+
| 0| 0| 0| 0| 0| 0| 0| 0| 0| i
+--+--+--+--+--+--+--+--+--+
```
